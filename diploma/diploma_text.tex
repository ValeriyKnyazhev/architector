\documentclass[a4paper,14pt]{extreport} %размер бумаги устанавливаем А4, шрифт 14пунктов
\usepackage[T2A]{fontenc}
\usepackage{booktabs} % For prettier tables
\usepackage[utf8]{inputenc}%включаем свою кодировку: koi8-r или utf8 в UNIX, cp1251 в Windows
\usepackage[english,russian]{babel}%используем русский и английский языки с переносами
\usepackage{amssymb,amsfonts,amsmath,mathtext,cite,enumerate,float} %подключаем нужные пакеты расширений
\usepackage[dvips]{graphicx}
\usepackage{multirow}
\usepackage{pgfplots}
%\usepackage{listings}
\usepackage[linesnumbered,boxed]{algorithm2e}
\graphicspath{{./images/}}%путь к рисункам

\usepackage[titletoc]{appendix}
\usepackage{pdfpages}

\makeatletter
\renewcommand{\@biblabel}[1]{#1.} % Заменяем библиографию с квадратных скобок на точку:
\makeatother

\usepackage{extsizes}

\usepackage{geometry} % Меняем поля страницы
\geometry{left=3cm}% левое поле
\geometry{right=1.5cm}% правое поле
\geometry{top=2cm}% верхнее поле
\geometry{bottom=2cm}% нижнее поле
\linespread{1.3}

%\renewcommand{\theenumi}{\arabic{enumi}}% Меняем везде перечисления на цифра.цифра
%\renewcommand{\labelenumi}{\arabic{enumi}}% Меняем везде перечисления на цифра.цифра
%\renewcommand{\theenumii}{.\arabic{enumii}}% Меняем везде перечисления на цифра.цифра
%\renewcommand{\labelenumii}{\arabic{enumi}.\arabic{enumii}.}% Меняем везде перечисления на цифра.цифра
%\renewcommand{\theenumiii}{.\arabic{enumiii}}% Меняем везде перечисления на цифра.цифра
%\renewcommand{\labelenumiii}{\arabic{enumi}.\arabic{enumii}.\arabic{enumiii}.}% Меняем везде перечисления на цифра.цифра


\begin{document}
\input{diploma_title}% это титульный лист
\tableofcontents % это оглавление, которое генерируется автоматически

\newpage
\chapter{Введение}
\section{Актуальность проблемы}

Темпы строительства зданий и промышленных объектов в мире и сложность конструкций увеличивается с каждым годом \cite{BUILDING_GROWTH_RATE}. Ранее использовавшиеся методы проектирования чертежей на бумаге отходят на второй план, и все более активно используются компьютерные технологии \cite{BUILDING_SOFTWARE}, а также становится очевидной необходимость повсеместного введения стандартов проектирования зданий. \\
Одним из наиболее современных стандартов проектирования является стандарт BIM (Building Information Modeling)\cite{BIM_FUTURE}. Его концепция позволяет не только проектировать здания, но также охватить весь их жизненный цикл: от управления затратами и строительством здания до его эксплуатации. \\
Подобная всеобъемлемость хороша тем, что вся информация о конструкции содержится в одном проекте. Это помогает сохранять целостность данных, позволяет быстрее выявлять ошибки и уменьшать стоимость ремонта. Но также из этого вытекает необходимость координации одновременной работы большого количества людей над одним проектом: крупных команд архитекторов, иногда распределенных по всему миру, эксплуатирующих организаций и всех других людей, участвующих в обслуживании здания. Поэтому очень важно иметь возможность одновременного изменения BIM представления объекта разными людьми с минимизацией рисков потери каких-либо данных. \\
Малейшая ошибка в одном из элементов конструкции, не обнаруженная вовремя, может привести к серьезным последствиям, например к дополнительным затратам на проект. Поэтому важно в любой момент времени иметь доступ к электронному журналу контроля всех изменений проекта. \\
Использование стандартных систем контроля версий, таких как \textit{Git}, не позволяет учесть специфику предметной области. Специализированное программное обеспечение накладывает большие ограничения на окружение запуска, вплоть до ограничения на операционные системы. Также оно позволяет работать только с определенными форматами данных, которые поддерживаются только им. Для улучшения координации работы между командами специалистов разных областей требуется наличие возможности использования универсального формата данных.

\newpage 
\section{Постановка задачи}

Требуется разработать веб-систему на основе универсального формата данных, которая бы могла предоставить пользователям следующие возможности:
\begin{enumerate}
\item Управление жизненным циклом проектов. \\
Создание проекта, добавление, редактирование  и удаление файлов, управление правами доступа к проекту.
\item Отслеживание изменений проекта во времени. \\
Отображение списка всех изменений проекта, а также возможность просмотра версии данных или внесенных в проект изменений в конкретный момент времени.
\item Одновременное внесение изменений в проекты несколькими пользователями. \\
Пользователи могут работать над разными частями проекта в одно и то же время. При наличии конфликтующих изменений предоставляется возможность применения модификаций, внесенных как другими пользователями, так и текущим.
\item Подготовка окружения, запуск системы и ее масштабируемость. \\
Возможность быстрой подготовки окружения и запуска сервиса для мговенного развертывания веб-платформы. В моменты пиковой нагрузки пользователей, веб-платформа не должна терять производительность.
\end{enumerate}
Также система должна предоставлять как внешнее API для интегрирования с другими системами, так и веб-интерфейс для доступа обычным пользователям.

\newpage

\chapter{Основная часть}
\section{Стандарт BIM}

BIM (Building Information Modeling или информационное моделирование здания) - это стандарт создания проектов строительных объектов, с учетом физических и функциональных характеристик. В основе проектов, созданных по этому стандарту, лежит информация о каждом из создаваемых объектов. \\
Исторически, компьютерные проекты зданий были просто цифровыми аналогами бумажных чертежей, которые использовались архитекторами, дизайнерами, инженерами и строительными бригадами. 
Значительные сложности могут быть вызваны тем, что разные команды должны получать доступ к информации проекта по-разному, часто в разное время на протяжении всего проекта. \\
Архитекторам нужны «чертежи» - планы, разрезы и фасады. Дизайнерам интерьера нужны 3D модели. Строителям и инженерам нужны документы и схемы в формате используемого в организации ПО для соответствующих задач. Если использовать стандартные подходы к планированию, необходимо затратить время специалистов на графическую конвертацию архитектурного чертежа в необходимый формат. Любые внесенные в архитектурный проект изменения должны распространяться по каждому файлу вручную, и затем проверяться на правильность. \\
В подобной схеме организации работы проектирование здания становится трудоемким итеративным процессом без единого источника информации об объекте, и соответственно с большой вероятностью ошибок и несоответствий между версиями разных специалистов.
\subsubsection{Преимущества BIM}

BIM позволяет решать эти проблемы: на передний план выходит не графическое представление, а информация о каждом из объектов в будущем здании, а затем уже эти данные представляются графически. \\
В общем, объект BIM - это любой аспект здания, который не является частью информации о материалах строительства. Объекты BIM подразделяются на два типа: составные и слоистые.
\begin{itemize}
\item составные объекты -- имеют фиксированные очертания и размеры. Это могут быть окна, двери, трубопроводы, воздуховоды, электромонтажные работы и т. д.
\item слоистые объекты -- не имеют фиксированных форм или размеров и включают в себя большинство конструктивных элементов, таких как кровля, стены и потолки.
\end{itemize}
С практической точки зрения объекты BIM далее подразделяются на общие и частные объекты. Общие объекты содержатся в библиотеках объектов, общих для большинства программ BIM, и используются на начальном этапе проектирования. Частные объекты - это объекты, которые отражают характеристики конкретных коммерческих продуктов, которые будут использоваться в строительстве. Как правило, они создаются для каждого проекта индивидуально. \\
Входные данные о конструкции и дизайне, состоящие из объектов BIM, могут быть сделаны через графический интерфейс. Информация о разных сферах проекта хранится отдельно, но может быть сгенерирована в любом количестве форматов. \\
Подобная структура проектов, созданных по стандарту BIM, предоставляет возможности для работы нескольких команд, которые могут физически находиться в разных частях света, одновременно над одним проектом \cite{BIM_ADVANTAGES}. Автоматическая и простая конвертация из одного формата в другой позволяет сокращать трудозатраты специалистов и соответственно облегчает взаимодействие между несколькими командами.
\subsubsection{Уровни зрелости стандарта BIM}

\begin{enumerate}
\item \textbf{Уровень 0 BIM} -- фактически означает только 2D чертеж и отсутствие коллаборации. Распространение проекта между группами осуществляется через бумажные или электронные версии.
\item \textbf{Уровень 1 BIM} -- на этом уровне 3D модели используются для визуализации концепции, и 2D чертежи для разработки строительной документации. Обмен информацией осуществляется через общую среду данных, которая обычно обеспечивается заказчиком.
\item \textbf{Уровень 2 BIM} -- представляет собой комплексную модель, работа над которой ведется специалистами из разных областей деятельности в различных программах. Сборка общей модели данных, ее анализ и выявление коллизий (конфликтов) должны осуществляются в специальных программных приложениях. Данный уровень предполагает добавление следующих измерений: 4D (время) и 5D (стоимость). \\
Любое программное обеспечение САПР, используемое каждой из команд, должно быть способно экспортировать данные о проекте в один из распространенных форматов файлов, таких как IFC или COBie.
\item \textbf{Уровень 3 BIM} -- разрабатываемый проект использует единую интегрированную модель, содержащуюся в отдельных дисциплинарных “инструментах BIM” с вложенными данными, которая также совместима с открытым форматом данных IFC. Данная модель создается и используется для управления жизненным циклом проекта, также в ней хранится информация о выполнении строительных работ и затратах.
\end{enumerate}

\newpage
\subsubsection{Применение стандарта BIM}

Стандарт BIM был введен в ряде стран на законодательном уровне\cite{BIM_USAGE}.
Первыми ввели обязательное использование стандарта BIM ряд скандинавских стран: в Финляндии и Дании он обязателен с 2007 года. \\
Так, правительство Великобритании обязало всех участников отрасли с апреля 2016 года выполнять все финансируемые государством проекты на втором уровне зрелости\cite{BIM_UK}. Решение было принято в частности после того, как стало ясно, что использование BIM стандарта второго уровня зрелости помогло сэкономить £840M в 2013-2014 годах, в нескольких больших европейских странах, включая Францию и Германию. \\
В России использование стандарта BIM будет введено летом 2019 года для зданий, строящихся по государственному заказу по поручению президента\cite{BIM_RUSSIA}.

\newpage
\section{Формат данных}

Существует множество способов хранения и управления данными в рабочем процессе BIM. В результате пользователям предлгается большое количество различных форматов файлов.
Обычно пользователи работают со специализированным программным обеспечением в зависимости от их области деятельности, которое обычно использует проприетарный специфический формат данных, об устройстве которых знают только разработчики. Нам же надо выбрать универсальный формат данных, чтобы и архитекторы, и инженеры, и другие пользователи могли работать с ним.

\subsubsection{Форматы данных BIM}
Рассмотрим форматы данных, которые реализуют стандарт BIM.
Можно выделить две основные категории форматов данных:
\begin{itemize}
\item проприетарные \\
Файлы, которые могут быть прочитаны только определенным программны обеспечением. \\
Примеры форматов:
	\begin{itemize}
	\item RVT \\
	Cобственный формат Autodesk для файлов Revit, который можно открыть только в специализированной программе Revit.
	\item NWD \\
	Собственный формат Autodesk для файлов Navisworks, который можно открыть только в Navisworks Freedom или Navisworks Manage.
	\item DWG \\
	Собственный формат Autodesk для файлов AutoCAD. Данный формат является наиболее универсальным для просмотра и создания проектов. Файлы DWG доступны для редактирования в любой программе на основе САПР.
	\end{itemize}
\item открытые \\
Открытые форматы файлов не зависят от производителя. Они могут быть прочитаны и отредактированы любым программным обеспечением. Обычно данные форматы данных сопровождаются открытым исходным кодом и возможностью развития мировым обществом. \\
Примеры форматов:
	\begin{itemize}
	\item IFC \\
	Industry Foundation Classes (IFC)- наиболее распространенный формат данных с открытой спецификацией, реализующий стандарт BIM. Ряд программ, включая Revit и Navisworks, могут открывать файлы IFC и работать с ними.
	\item COBie \\
	Открытый формат данных, который не хранит в себе графические / геометрические данные, но позволяет передавать большие наборы разных данных, созданных во время проектирования и строительства конечному пользователю в удобочитаемом виде.
	\end{itemize}
\end{itemize}

Использование проприетарных форматов вендоров программного обеспечения может препятствовать взаимодействию членов команды, если они пользуются различными типами данных. Нам требуется найти такое решение, которое позволит поддержать взаимосвязи различных BIM моделей и формата обмена данными. Остановимся на открытых форматах данных BIM, которые подразумевают универсальный подход к созданию проекта, строительству и эксплуатации объектов, базирующийся на открытых стандартах и процессах. \\
Основная разница между двумя выше указанными открытыми форматами данных модели BIM состоит в том, что COBie помогает профессионалам обмениваться различными данными разных форматов, сохраняя их в удобочитаемой форме, тогда как IFC помогает различным программам понимать и обмениваться данными в едином формате с учетом иерархии и взаимосвязей между компонентами архитектурно-строительных моделей. Предпочтение было отдано формату данных IFC, преимущества которого описаны в следующем параграфе.\\

\subsubsection{Формат данных IFC}

Подытоживая, можно выделить следующие основные преимущества IFC формата:
\begin{enumerate}
\item Единый язык модели для различных областей использования.
\item Универсален, позволяет хранить различные данные в одной модели.
\item Открытый формат данных.
\item Разрабатывается независимым сообществом.
\item Наличие иерархии и взаимосвязей между компонентами архитектурно-строительной модели.
\item Возможность конвертации в/из других форматов данных.
\end{enumerate} 

\textit{Пример данных:}
\begin{figure}[H]
\center{\includegraphics[width=1.0\textwidth]{ifc-data.png}}
\caption{Формат данных IFC}
\label{ifc-data-format}
\end{figure}

\newpage
\begin{enumerate}
\item ISO-10303-21 -- спецификация языка описания BIM моделей.
\item HEADER -- блок описания файла.
\begin{enumerate}
\item FILE\_DESCRIPTION -- описание опций создания контента.
\item FILE\_NAME -- информация о создании файла, организации, а также об используемом программном обеспечении.
\item FILE\_SCHEMA -- версия сехмы данных IFC.
\end{enumerate}
\item DATA -- блок описания BIM представления объекта.
\end{enumerate}

\newpage
\section{Пользовательские истории}

Пользовательские истории (user story) -- способ описания требований к разрабатываемому продукту, которые сформулированы на понятном пользователю языке. Каждая пользовательская история должна быть ограничена в размере и сложности ее реализации. \\
Пользовательские истории -- быстрый способ документирования основных требований клиента, их целью является оперативное регирование на изменения требований реального мира. \\
Текст каждой пользовательской истории должен пояснять роль пользователя и его действия в системе. Для начала требуется определить список основных пользователей нашей системы.

\subsection{Набор персонажей}

Для получения конечного списка персонажей используется иерархическая кластеризация. Требуется составить список протоперсонажей (персонажей-гипотез), создать список шкал умений, поведенческих и мотивационных переменных. Далее, с помощью кластеризации персонажей по ранее составленным критериям (в данной работе проводится кластеризация с помощью дендограмм), анализируется первоначальный список персонажей и сокращается до самых значимых.

\subsubsection{Персонажи-гипотезы}
\begin{enumerate}
\item Архитектор
\item Главный архитектор
\item Дизайнер
\item Студент технического направления
\item Инвестор
\item Строитель
\end {enumerate}

\subsubsection{Умения, поведенческие и мотивационные переменные}

Выделены следующие характеристики, в той или иной мере описывающие наших персонажей-прототипов.
\begin{enumerate}
\item Уровень технического образования \\
1 - законченная средняя школа, 5 - PhD
\item Знание иностранных языков \\
1 - beginner, 5 - proficiency
\item Опыт работы с персональными компьютерами \\
1 - обычный пользователь, 5 - администратор ПК
\item Цели использования нашей системы \\
1 - протестировать систему, 5 - коммерческое использование
\item Частота использования нашей системы \\
1 - единичное использование, 5 - постоянное взаимодействие с системой
\item Масштабы создаваемых проектов \\
1 - домашние маленькие проекты, 5 - проекты крупных зданий
\item Умение проектировать архитектурные модели \\
1 - нет опыта, 5 - опыт более 5 лет и профессиональное образование
\item Платежеспособность \\
1 - отсутствие постоянного дохода, 5 - наличие крупных бизнесов
\end{enumerate}

\newpage
\subsubsection{Матрица сходства персонажей}

В данной матрице в первом столбце перечислены все персонажи-прототипы, в первой строке перечислены номера  указанных выше описательных характеристик.

\begin{table}[H]
\caption {Матрица  сочетаний персонажей и характеристик} \label{tab:title}
\begin{center}
\begin{tabular}{| p{4cm}  | p{1cm} | p{1cm} | p{1cm} | p{1cm} | p{1cm} | p{1cm} | p{1cm} | p{1cm} |}
\hline
\textbf{Персонаж} & \textbf{1} & \textbf{2} & \textbf{3} & \textbf{4} & \textbf{5} & \textbf{6} & \textbf{7} & \textbf{8} \\
\hline
Архитектор 		& 4 & 2 & 3 & 4 & 4 & 4 & 4 & 3 \\
\hline
Гл. архитектор	& 5 & 5 & 4 & 5 & 5 & 5 & 5 & 4 \\
\hline
Дизайнер			& 3 & 2 & 3 & 3 & 3 & 2 & 3 & 3 \\
\hline
Студент			& 3 & 2 & 3 & 2 & 2 & 2 & 3 & 1 \\
\hline
Инвестор			& 4 & 5 & 4 & 5 & 2 & 5 & 1 & 5 \\
\hline
Строитель		& 2 & 1 & 2 & 3 & 3 & 4 & 2 & 2 \\
\hline
\end{tabular}
\end{center}
\end{table}

\subsubsection{Построение дендограммы}

Под дендрограммой понимается дерево, которое построено на основе матрицы мер близости. Она позволяет отобразить взаимные связи между объектами из первоначально заданного множества объектов. Для построения дендрограммы требуется составить матрицу сходства, которая определяет уровень сходства между парами кластеров. \\
При построении дендограмм могут использоваться следующие способы кластеризации данных:
\begin{itemize}
\item {\it Агломеративные методы} \\
Когда новые кластеры создаются путем объединения более мелких кластеров, дерево строится от листьев к корню.
\item {\it Дивизивные или дивизионные методы} \\
Когда более крупные кластеры делятся на более мелкие, дерево строится от корня к листьям.
\end{itemize}
В данной работе используется агломеративный метод, а именно метод одиночной связи (ближайшего соседа).
Расстояние между двумя различными кластерами берется равным минимальному расстоянию между двумя элементами из них
\textit{
\begin{equation}
\label{dendogramm_algo}
 dist(\mathcal{A},\mathcal{B}) = min \{ d(a, b) : a \in \mathcal{A}, b \in \mathcal{B} \}
\end{equation}
где $d(a, b)$ -- расстояние между элементами $a$ и $b$, принадлежащими кластерам $\mathcal{A}$ и $\mathcal{B}$ 
}

\begin{figure}[H]
\center{\includegraphics[width=1.0\textwidth]{dendogramm.png}}
\caption{Дендограмма.}
\label{dendogramm}
\end{figure}

\subsubsection{Итоговый набор персонажей}

Конечный набор персонажей, которые будут анализироваться в данной работе, представлен ниже:
\begin{itemize}
\item Главный архитектор
\item Архитектор
\item Куратор проекта
\item Строитель
\end{itemize}

Куратором проекта в данном случае является любое лицо, которое желает следить за процессом разработки архитектурных проектов, например, инвестор.

\newpage
\subsection{Действия пользователей}

Описанные в разделе ранее пользователи имеют следующие цели при работе с нашей системой, а также планируют выполнять определенные действия с некоторыми ограничениями.

\subsubsection{Главный архитектор}

\textit{Личные цели:}
\begin{enumerate}
\item Создание крупных архитектурных проектов зданий.
\item Контроль над процессом разработки проекта.
\end{enumerate}
\textit{Действия:}
\begin{enumerate}
\item Начать новый архитектурный проект.
\item Итеративная разработка отдельных частей архитектурной модели.
\item Анализ выполненной командой работы.
\item Управление командами проектирования в различных проектах.
\end{enumerate}
\textit{Требования:}
\begin{enumerate}
\item Масштабируемость системы для поддержки работы большого количества людей.
\item Возможность получить данные проекта в любой выбранный промежуток времени.
\item Создание проектов в едином формате данных (IFC4 или IFC2x3).
\item Доступ к системе из любой точки мира.
\item Возможность предоставить права доступа к выбранному проекту как только на чтение, так и на редактирование.
\end{enumerate}

\subsubsection{Архитектор}

\textit{Личные цели:}
\begin{enumerate}
\item Проектирование сложных архитектурных строений.
\item Обучение на основе истории изменений проекта.
\end{enumerate}
\textit{Действия}
\begin{enumerate}
\item Итеративная разработка отдельных частей архитектурной модели.
\item Анализ выполненной другими членами команды работы над проектом.
\end{enumerate}
\textit{Требования}
\begin{enumerate}
\item Возможность одновременной работы с другими членами команды.
\item Возможность детализированного просмотра изменений проекта.
\item Разработка проектов в едином формате данных.
\item Отказоустойчивость системы.
\end{enumerate}

\subsubsection{Куратор}

\textit{Личные цели:}
\begin{enumerate}
\item Контроль над инвестиционными архитектурными проектами.
\end{enumerate}
\textit{Действия}
\begin{enumerate}
\item Просмотр истории этапов проектирования и строительства архитектурного проекта.
\item Получение детализированного описания изменений в выбранной итерации разработки проекта.
\end{enumerate}
\textit{Требования}
\begin{enumerate}
\item Понятный веб-интерфейс системы.
\item Доступ к системе из любой точки мира.
\item Возможность использования API системы для стороннего проекта.
\item Целостность хранимой информации.
\end{enumerate}

\subsubsection{Строитель}

\textit{Личные цели:}
\begin{enumerate}
\item Планирование строительства на основе функциональных и физических данных архитектурного проекта.
\end{enumerate}
\textit{Действия}
\begin{enumerate}
\item Детальное изучение цифрового контента выбранной версии проекта с целью извлечения важных для строительства характеристик.
\end{enumerate}
\textit{Требования}
\begin{enumerate}
\item Простой веб-интерфейс системы.
\item Получение данных о модели архитектурного объекта в выбранной итерации разработки.
\item Сравнительно недорогая лицензия на использование продукта.
\end{enumerate}

\newpage
\subsection{Карта пользовательских историй}

Итоговый набор пользовательских историй выглядит следующим образом.

\begin{figure}[H]
\center{\includegraphics[width=1.0\textwidth]{user-story-mapping.jpg}}
\caption{Пользовательские истории.}
\label{user-stories}
\end{figure}

\newpage
\section{Бизнес-требования}

Бизнес-требования (business requirements) -- информация, в совокупности описывающая потребность, которая инициирует один или больше проектов с целью предоставить решение и получить требуемый конечный результат. В основу бизнес-требований ложатся бизнес-возможности, бизнес-цели, критерии успеха и положение о концепции. \\
Бизнес-требования определяют концепцию решения и границы проекта, в котором оно будет реализовываться. \\
Концепция и границы -- два базовых элемента бизнес-требований. \\ Концепция продукта (product vision) должна кратко описывать конечный продукт, который в свое время должен достигать заданных бизнес-целей. \\
Границы проекта (project scope) показывают, какая часть конечной концепции продукта будет реализована в текущей итерации. \\
В данной работе границы проекта совпадают с концепцией решения. \\
Документ о концепции и границах (vision and scope document) -- единый документ, который включает в себя все бизнес-требования. \\
Далее будут представлены основные пункты этого документа, составленные на основе описанных ранее пользовательских историй.

\subsection{Исходные данные}

Требуется разработать веб-платформу для совместной работы над архитектурными проектами с ведением электронного журнала контроля изменений и возможностью рецензирования и интегрирования в проект модификаций, с разрешением возможных конфликтных ситуаций.

\newpage
\subsection{Бизнес-цели}

\begin{table}[H]
\caption {Нефинансовые цели} \label{tab:title}
\begin{center}
\begin{tabular}{ | l | p{14cm} | }
\hline
№ & Цель \\
\hline
Н1 & Разработать веб-платформу для управления жизненным циклом	архитектурных проектов. \\
\hline
Н2 & Реализовать возможность одновременного редактирования проектов и разрешения конфликтов в случае их наличия. \\
\hline
Н3 & Реализовать хранение журнала контроля всех изменений проектов и возможность его просмотра. \\
\hline
\end{tabular}
\end{center}
\end{table}
 
\subsection{Критерии успеха}

\begin{itemize}
\item Веб-платформа позволяет управлять жизненным циклом архитектурного проекта.
\item Веб-платформа предоставляет возможность просмотра электронного журнала контроля изменений проекта.
\item Веб-платформа позволяет разрешать конфликты, возникающие при одновременном редактировании, с минимизацией рисков потери данных.
\end {itemize}
 
 \subsection{Положение о концепции проекта}
 
Для пользователей, которым требуется управлять жизненным циклом  архитектурных проектов и иметь возможность отслеживать изменения  во времени, данная работа является веб-платформой, которая будет выступать в качестве единой системы по хранению и изменению архитектурных проектов с минимизацией рисков потери данных с возможностью просмотра электронного журнала контроля изменений.

\newpage
\section{Ограничения системы}
\subsection{Основные функции}

\begin{enumerate}
\item Просмотр списка доступных пользователю проектов.
\item Создание проекта.
\item Управление правами доступа к проекту.
\item Добавление файлов в проект.
\item Удаление файлов из проекта.
\item Просмотр метадаты и контента файла.
\item Редактирование метадаты проекта и файлов.
\item Редактирование контента файла.
\item Разрешение конфликтных ситуаций при редактировании файлов проекта.
\item Просмотр журнала контроля изменений проекта.
\item Просмотр контента проекта в определенный промежуток времени.
\item Просмотр детализированного описания изменения, внесенного в проект в определенный момент времени.
\end {enumerate}

\subsection{Ограничения и исключения}

\begin{itemize}
\item Размер каждого файла должен не превышать 150 Мб (ограничение IFC формата).
\item В данной работе не предполагается возможность создания связанных между собой файлов с BIM представлениями объектов.
\end {itemize}

\newpage

\section{Функции системы}

\begin{enumerate}

\item Просмотр списка проектов \\
Пользователь может получить список доступных ему проектов. В каждом элементе списка предоставляется краткая информация о проекте. Также имеется возможность фильтрации данных по различным описывающим проект характеристикам.

\begin{table}[H]
\caption {Просмотр списка проектов} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
ПСПФ1 & Система должна предоставить список всех проектов, которые доступны пользователю.  \\
\hline
ПСПФ2 & Система должна предоставить возможность фильтрации результатов поиска по следующим параметрам: имя проекта, дата создания, тип прав доступа.  \\
\hline
ПСПФ3 & Записи проектов должны содержать следующую информацию: имя, описание проекта, даты создания и последнего изменения, имя владельца, а также краткую информацию о файлах. \\
\hline
\multicolumn{2}{ | l | }{Нефункциональные требования:} \\
\hline
ПСПН1 & Пользователю отображаются только те проекты, владельцем которых он является, или к которым он имеет права доступа на чтение или редактирование .\\
\hline
\end{tabular}
\end{center}
\end{table}

\newpage
\item Создание проекта \\
Пользователь может создать новый проект с возможностью указания его названия и полного описания.

\begin{table}[H]
\caption {Создание проекта} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
СПФ1 & При создании проекта система должна предоставить пользователю идентификатор, по которому он теперь сможет работать с только что созданным проектом. \\
\hline
СПФ2 & При создании проекта система предоставляет пользователю возможность ввести имя и описание нового проекта. \\
\hline
\multicolumn{2}{ | l | }{Нефункциональные требования:} \\
\hline
СПН1 & Название проекта должно содержать не менее 1 и не более 50 символов.\\
\hline
СПН1 & Описание проекта должно быть не длиннее 500 символов.\\
\hline
\end{tabular}
\end{center}
\end{table}

\item Управление правами доступа к проекту \\
Пользователь может предоставить права доступа к проекту либо на чтение, либо на редактирование другим пользователям системы. \\
Права на чтение подразумевают только просмотр всех данных проекта и его изменений. \\
Права на редактирование включают в себя права на чтение, а также возможность управления жизненным циклом проекта.

\begin{table}[H]
\caption {Управление правами доступа} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
ПДФ1 & Система предоставляет возможность выдать права доступа к проекту другим пользователям. \\
\hline
\multicolumn{2}{ | l | }{Нефункциональные требования:} \\
\hline
ПДН1 & Права пользователей подразделяются два типа: чтение, редактирование. \\
\hline
ПДН2 & Только владелец проекта имеет возможность предоставлять права доступа к проекту другим пользователям системы. \\
\hline
ПДН3 & По умолчанию только что созданный проект доступен для чтения и редактирования только его владельцу. \\
\hline
\end{tabular}
\end{center}
\end{table}

\item Добавление файлов в проект \\
Пользователь может добавить новый файл с метадатой и контентом, описывающим BIM представление объекта. Загружать файл можно как по ссылке, так и с помощью прикрепления локального файла с данными. Также имеется возможность создать пустой файл. \\

\begin{table}[H]
\caption {Добавление файлов в проект} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
ДФФ1 & Система предоставляет возможность добавления файлов только в случае наличия прав доступа пользователя на редактирование проекта. \\
\hline
ДФФ2 & При невозможности загрузить данные система должна оповестить об этом пользователя (с указанием причины). \\
\hline
ДФФ3 & Система предоставляет возможность загрузить файл с другого веб-источника данных. \\
\hline
ДФФ4 & Система предоставляет возможность загрузить локальный файл с персонального компьютера пользователя. \\
\hline
ДФФ5 & Система предоставляет возможность создать полностью пустой файл. \\
\hline
\multicolumn{2}{ | l | }{Требования к данным:} \\
\hline
ДФД1 & Формат загружаемых данных должен соответствовать IFC.\\
\hline
ДФД2 & Максимальный размер загружаемых данных - 150 Мб. \\
\hline
\end{tabular}
\end{center}
\end{table}

\newpage
\item Удаление файлов из проекта \\
Пользователь может удалить любой файл из проекта. \\

\begin{table}[H]
\caption {Удаление файлов из проекта} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
ДФФ1 & Система предоставляет возможность удаления файлов \\
\hline
ДФФ2 & Удаление файлов возможно только в случае наличия прав доступа у пользователя на редактирование проекта.  \\
\hline
\end{tabular}
\end{center}
\end{table}

\item Просмотр метадаты и контента файла \\
Пользователь может посмотреть метадату и контент, описывающий BIM представление объекта, файла.

\begin{table}[H]
\caption {Просмотр метадаты и контента файла} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
ПМКФ1 & Система предоставляет возможность получения данных файла только в случае наличия прав доступа пользователя на чтение проекта.\\
\hline
ПМКФ2 & Система предоставляет возможность получить данные метадаты файла. \\
\hline
ПМКФ3 & Система предоставляет возможность получить контент файла, который описывает BIM представление объекта. \\
\hline
\end{tabular}
\end{center}
\end{table}

\newpage
\item Редактирование метадаты проекта и файлов \\
Пользователь может изменить название и описание уже существующего проекта. \\
Также он имеет возможность измененить метадату файлов проекта.

\begin{table}[H]
\caption {Редактирование метадаты проекта и файлов} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
РМФ1 & Система предоставляет возможность редактирования метадаты проекта или файлов только в случае наличия прав доступа пользователя на редактирование этого проекта. \\
\hline
РМФ2 & Система предоставляет возможность редактирования названия и описания существующих проектов. \\
\hline
РМФ3 & Система предоставляет возможность редактирования метадаты файлов в проектах. \\
\hline
\multicolumn{2}{ | l | }{Требования к данным:} \\
\hline
РМД1 & Название проекта должно содержать не менее 1 и не более 50 символов.\\
\hline
РМД1 & Описание проекта должно быть не длиннее 500 символов.\\
\hline
\end{tabular}
\end{center}
\end{table}

\item Редактирование контента файла \\
Пользователь имеет возможность изменить контент существующих файлов в проекте. \\

\begin{table}[H]
\caption {Редактирование контента файла} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
РКФ1 & После внесения изменений в контент текущей версии файла система должна проверить корректность данного изменения и оповестить пользователя либо о невозможности выполнения, либо об успешности операции. \\
\hline
РКФ2 & После внесения изменений в контент файла система должна обновить историю проекта. \\
\hline
РКФ3 & Система предоставляет возможность редактирования контента файла только в случае наличия прав доступа пользователя на редактирование проекта.\\
\hline
РКФ4 & Для возможности нахождения конфликтов и дальнейшего решения их система должна получать номер изменения, для которого изначально были получены данные. \\
\hline
\multicolumn{2}{ | l | }{Нефункциональные требования:} \\
\hline
РКН1 & Вносить изменения разрешается только в существующие файлы. \\
\hline
\end{tabular}
\end{center}
\end{table}

\item Разрешение конфликтных ситуаций при редактировании файлов проекта \\
Пользователь может получить список конфликтных изменений, а затем, решив их, обновить данные файлов.\\

\begin{table}[H]
\caption {Разрешение конфликтных ситуаций при редактировании файла} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
РКСФ1 & Система должна предоставить возможность получения получения информации о конфликтах изменения файлов проекта. \\
\hline
РКСФ2 & Система должна предоставить возможность решения конфликтов и дальнейшего обновления данных в файлах. \\
\hline
РКСФ3 & Система предоставляет возможность выявления и решения конфликтных ситуаций только в случае наличия прав доступа пользователя на редактирование проекта.\\
\hline
\end{tabular}
\end{center}
\end{table}


\item Просмотр журнала контроля изменений проекта \\
Пользователь может посмотреть список всех изменений, который происходили с проектом за весь его жизненный цикл. Также имеется возможность получения списка изменений только для определенного файла этого проекта.\\

\begin{table}[H]
\caption {Просмотр журнала контроля изменений проекта} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
ЖАИФ1 & Система должна предоставить возможность получения полного списка изменений проекта. \\
\hline
ЖАИФ2 & Система должна предоставить возможность получения полного списка изменений определенного файла проекта. \\
\hline
ЖАИФ3 & Система предоставляет возможность просмотра журнала контроля изменений только в случае наличия прав доступа пользователя на чтение проекта.\\
\hline
ЖАИФ4 & Записи изменений должны содержать следующую информацию: идентификатор изменения, идентификатор родительского изменения, время, автор и сообщение изменения. \\
\hline
\multicolumn{2}{ | l | }{Нефункциональные требования:} \\
\hline
ЖАИН1 & Просмотр списка изменений для определенного файла проекта доступен только для существующих на момент выполнения действия файлов. \\
\hline
\end{tabular}
\end{center}
\end{table}

\item Просмотр контента проекта в определенный момент времени \\
Пользователь может получить данные о проекте и его файлах, в том числе и контент, описывающий BIM представления объектов, для любой записи в журнале контроля изменений проекта.\\

\begin{table}[H]
\caption {Просмотр контента проекта в определенный момент времени} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
КМВФ1 & Система должна предоставить возможность получения метадаты проекта в любой момент времени. \\
\hline
КМВФ2 &  Система должна предоставить возможность получения списка всех файлов проекта в любой момент времени. \\
\hline
КМВФ3 & Записи файлов проекта, полученные для любого момент времени его жизненного цикла, должны содержать метадату и контент, который описывает BIM представление объекта. \\
\hline
КМВФ4 & Система предоставляет возможность просмотра контента проекта и его файлов только в случае наличия прав доступа пользователя на чтение проекта.\\
\hline
\end{tabular}
\end{center}
\end{table}

\item Просмотр детализированного описания изменения, внесенного в проект в определенный момент времени \\
Пользователь может получить детализированное описание определенного изменения проекта.\\

\begin{table}[H]
\caption {Просмотр детализированного описания изменения} \label{tab:title}
\begin{center}
\begin{tabular}{| p{2.5cm}  | p{11.5cm} |}
\hline
\multicolumn{2}{ | l | }{Функциональные требования:} \\
\hline
ДОИФ1 & Система должна предоставить возможность получения детализированного описания изменения проекта. \\
\hline
ДОИФ2 & Детализированное описание изменения  проекта должно в себе содержать информацию о том, как изменилась метадата и контент файлов в данном измененнии. \\
\hline
ДОИФ3 & Детализированное описание контента файла должно содержать как сами изменения, так и часть обрамлющего из неизмененного контента. \\
\hline
ДОИФ4 & Система предоставляет возможность получения детализированного описания изменения только в случае наличия прав доступа пользователя на чтение проекта.\\
\hline
\end{tabular}
\end{center}
\end{table}

\end {enumerate}

\newpage
\section{Описание системы}

В данной главе приводится подробное описание следующих особенностей системы:
\begin{itemize}
\item Хранение истории изменения проекта.
\item Редактирование контента файлов с учетом возможных конфликтных ситуаций и их разрешение.
\item Построение проекции данных на определенный момент времени.
\end{itemize} 

\subsection{Хранение истории изменения проекта}

Каждое изменение данных проекта, например метадаты или контента файла сопровождается создание и сохранением новой сущности \textit{Commit}.

\begin{algorithm}[H]
class \textit{Commit} \{

	\hspace{0.5cm}$@$Nonnull 		Long 			id;
	
	\hspace{0.5cm}$@$Nullable		Long				parentId;
	
	\hspace{0.5cm}$@$Nonnull		String			projectId;
	
	\hspace{0.5cm}$@$Nonnull		String			author;
	
	\hspace{0.5cm}$@$Nonnull		String			message;
	
	\hspace{0.5cm}$@$Nonnull		Time				timestamp;
	
	\hspace{0.5cm}$@$Nonnull		\textit{Data}	data;
	
\}

class \textit{Data} \{

	\hspace{0.5cm}$@$Nonnull	List$<$\textit{FileItem}$>$ changedFiles;
	
\}

class \textit{FileItem} \{

	\hspace{0.5cm}$@$Nonnull	String fileId;
	
	\hspace{0.5cm}$@$Nonnull	\textit{MetadataChanges} metadata;
	
	\hspace{0.5cm}$@$Nonnull	\textit{DescriptionChanges} description;
	
	\hspace{0.5cm}$@$Nonnull	List<\textit{CommitItem} items;
	
\}
\caption{Сущность \textit{Commit}.}
\label{entity_commit}
\end{algorithm}

\newpage
Имея старые и новые метадату и контент файла можно вычислить, какие изменения должны быть применены к старым данным проекта, чтобы получить новые данные. \\

Для структур данных вроде \textit{Metadata} и \textit{Description} набор изменений определяется методом сравнения всех описательных характеристик. Если какая-либо характеристика была изменена, то в новом \textit{Commit} будет отображено новое значение для этой характеристики. \\
Описание моделей \textit{Metadata} и \textit{Description} выглядит следующим образом:
\begin{algorithm}[H]
class \textit{Metadata} \{

	\hspace{0.5cm}$@$Nonnull 		String 						name;
	
	\hspace{0.5cm}$@$Nonnull		Time							timestamp;
	
	\hspace{0.5cm}$@$Nonnull		List$<$String$>$		authors;
	
	\hspace{0.5cm}$@$Nonnull		List$<$String$>$		organizations;
	
	\hspace{0.5cm}$@$Nonnull		String						preprocessorVersion;
	
	\hspace{0.5cm}$@$Nonnull		String						originatingSystem;
	
	\hspace{0.5cm}$@$Nonnull		String						authorization;
	
\}

class \textit{Description} \{

	\hspace{0.5cm}$@$Nonnull		List$<$String$>$ 		descriptions;
	
	\hspace{0.5cm}$@$Nonnull		String			 			implementationLevel;
	
\}
\caption{Сущности \textit{Metadata} и \textit{Description}.}
\label{entity_metadata-and-description}
\end{algorithm}

Для самого контента файла, содержащего BIM представление объекта, список изменений определяется на основе полнотекстового сравнения, которое описано далее [Algorihtm \ref{MYERS_ALGO}]. \\
В результате работы алгоритма должен быть получен список изменений, которые подразделяются на три типа:
\begin{itemize}
\item ADDITION
\item DELETION
\item MODIFICATION
\end{itemize}

Эти изменения следует преобразовать в сущность \textit{CommitItem}.

\begin{algorithm}[H]
class \textit{CommitItem} \{

	\hspace{0.5cm}$@$Nonnull 		String 							value;
	
	\hspace{0.5cm}$@$Nonnull		Integer							position;
	
	\hspace{0.5cm}$@$Nonnull		\textit{ChangeType}		type;
	
\}
\caption{Сущность \textit{CommitItem}.}
\label{entity_commit_item}
\end{algorithm}
\vspace{0.2cm}
\textit{где параметр типа \textit{ChangeType} может принимать одно из следующих значений: ADDITION, DELETION.}

Правила преобразования:
\begin{itemize}
\item DELETION $\rightarrow$ 1 DELETION
\item ADDITION $\rightarrow$ 1 ADDITION
\item MODIFICATION $\rightarrow$ 1 DELETION + 1 ADDITION
\end{itemize}

Для определения позиции изменения также существуют некоторые правила:
\begin{enumerate}
\item ADDITION position - позиция элемента, после которого вставляется новый элемент в контент.
\item DELETION position - позиция элемента, который удаляется из контента.
\item Нумерация начинается с 1 \\
Связано это с проблемой вставки элементов в начало контента. Таким образом, при вставке в начало будут созданы элементы с позициями, равными 0. Что в свою очередь значит вставить эти элементы после 0'го элемента контента, которого не существует.
\end{enumerate}

Каждый новый \textit{Commit} основывается на изменениях, примененных к предыдущему контенту. Предыдущий контент имеет свой идентификатор изменения, которое привело к получению этих данных. Следовательно новая сущность \textit{Commit} должна указывать на последний \textit{Commit} предыдущего контента. При первом изменении проекта, в базе данных не существует ни единого коммита, который бы относился к этому проекту, в данном случае создается сущность \textit{Commit}, у которой отсутствует родитель ($parentId$), такой \textit{Commit} будем называть корневым. Его данные будут содержать в себе информацию о первом создании/добавлении какого-либо файла в проект.

\subsection{Редактирование контента файлов с учетом возможных конфликтных ситуаций и их разрешение}

При редактировании контента файлов проекта происходит проверка соответствия версии актуальных данных контента и версии, на основе которой пользователь получил старый контент и начал процесс его редактирования.  \\
В случае наличия \textit{Commit}, который уже применен к версии, лежащей в основе полученных данных, проводится проверка списков изменений на наличие пересечений. Если пересечений не обнаружено, то следовательно конфликт не обнаружен и следует, объединив изменения, применить их к актуальной версии данных. Если же конфликт найден, пользователю предоставляется возможность разрешить его путем выбора того или иного изменения элементов данных с последующим редактированием контента конфликтных блоков данных. \\
В каждом из случаев, обычное редактирование, когда других изменений применено не было, или ситуации, которые были описаны выше, завершающей операцией является приведение контента к новой версии данных. Но в силу специфики предметной области, любым изменением можно повредить связи с основополагающими объектами в BIM представлении. \\
На данном этапе необходим процесс валидации корректности новых данных. А именно выстраиваются связи вплоть до главных корневых объектов (Rooted Entities) \cite{IFC_MODELS}, например, IFCWall, IFCDoor и другие объекты, являющиеся подкатегориями объекта IfcProduct. Пользователю сообщается о возможном смысловом конфликте после внесения текущих изменений и предоставляется возможность либо применить эти изменения, либо их отменить. \\
Только при отсутствии возможных смысловых конфликтов, или согласии пользователя на обновление модели в противоположном случае, система обновит контент файла и добавит новую сущность \textit{Commit} в историю изменения проекта.

\subsection{Построение проекции данных на определенный момент времени}

Для корректности работы выше описанных сценариев и далее описанных алгоритмов требуется также иметь возможность построить проекцию данных проекта для определенного момента времени [Algorithm \ref{MAKE_PROJECTION}], в данном случае речь идет о конкретной сущности \textit{Commit}. \\
Данный функционал используется для получения контента старых версий данных в алгоритме нахождения конфликтных ситуаций, а также для предоставления пользователям возможности посмотреть контент данных на протяжении всей истории изменений проекта.


\newpage
\section{Описание алгоритмов}
В данном разделе описаны основные алгоритмы нашей системы поддержки и сопровождения проектов по стандарту BIM.

\subsection{Вычисление списка изменений контента} 
При каждом редактировании контента файлов, которые содержат в себе описание BIM представления объекта, нам требуется вычислять список изменений, которые были применены к данным. \\
В данной работе для вычисления списка изменений используется разностный алгоритм Майера \cite{MYERS_ALGO}.

Суть алгоритма сводится к нахождению оптимального пути из начальной точки (0,0) в конечную. Оптимальным считается тот путь, который содержит минимальное число вертикальных и горизонтальных сдвигов. Горизонтальный сдвиг соответствует ADDITION, вертикальный -- DELETION. При поиске оптимального пути во время нахождения в точке, из которой есть диагональный путь, переход по диагонали обязателен и не учитывается в длине общего пути.

\begin{figure}[H]
\center{\includegraphics[width=0.7\textwidth]{myers-diff-algo.png}}
\caption{Построение возможных путей решения.}
\label{myers-diff-algo}
\end{figure}

\begin{algorithm}[H]
\SetAlgoLined
\KwData{ sequence A and B, sizes of sequences N and M } 
\KwResult{ list of changes }

\SetKwFunction{FMain}{main}

\SetKwProg{Fn}{Function}{:}{}

\Fn{\FMain{$A$, $N$, $B$, $M$}}{
	
	\textbf{matrix} := new Matrix($N$, $M$)
	
	// find all common subsequences and fill diagonal elements
	
	\textbf{matrix}.fillAllCommonSubsequences($A$, $B$)
	
	/* search of way from (0, 0) to ($N$, $M$) with minimization of vertical and horizontal shifts number */
	
	\KwRet\ findMinimalWay(matrix, $A$, $N$, $B$, $M$)

}
\caption{Разностный алгоритм Майера.}
\label{MYERS_ALGO}
\end{algorithm}

\vspace{0.5cm}

\begin{algorithm}[H]
\SetAlgoLined
\KwData{ sequence A and B, sizes of sequences N and M } 
\KwResult{ longest common subsequence }

\SetKwFunction{FLCS}{LCS}

\SetKwProg{Fn}{Function}{:}{}

\Fn{\FLCS{$A$, $N$, $B$, $M$}}{
	
	\If{($N$ $>$ 0 AND $M$ $>$ 0)}
	{
	
		// optimal way is from (\textbf{x}, \textbf{y}) to (\textbf{u}, \textbf{v})
		
		(\textbf{x}, \textbf{y}), (\textbf{u}, \textbf{v}) = findOptimalSnake($A$, $B$)
		
		// where $D$ is minimum number of operations to transform $A$ to $B$
		
		\eIf{($D$ $>$ 1)}
		{
			\FLCS{$A$[1 : \textbf{x}], \textbf{x}, $B$[1 : \textbf{y}], \textbf{y})}	
			
			\KwRet\ $A$[\textbf{x} + 1 : \textbf{u}]		
			
			\FLCS{$A$[\textbf{u} + 1 : $N$], $N$ - \textbf{u}, $B$[\textbf{v} + 1 : $M$], $M$ - \textbf{v}}
		}{
			\eIf{($M$ $>$ $N$)}
			{				
				\KwRet\ $A$[1 : $N$]
			}{
				\KwRet\ $B$[1 : $M$]
			}
		}
	}
}
\caption{Нахождение наибольшей общей подпоследовательности.}
\label{LCS_ALGO}
\end{algorithm}

\newpage
\subsection{Получение детализированного описания изменения} 
\textbf{Дано:} \\
Старый контент файла, список изменений контента. \\
\textbf{Ожидаемый результат:} \\
Список блоков контента, которые содержат в себе как измененные элементы данных, так и те, которые не изменялись. Неизмененный контент, окружающий измененнные блоки, отображается для лучшего понимания пользователем, в какой части проекта были эти изменения. \\
Получение детализированного описания изменения всего проекта сводится к получению детализации по каждому файлу проекта.

\subsubsection{Получение детализации изменения для одного файла}

\begin{figure}[H]
\center{\includegraphics[width=0.9\textwidth]{detalized-changes.png}}
\caption{Детализация изменения контента.}
\label{detalized-changes}
\end{figure}
Если контент файла отсутствует, значит в текущем изменени проекта этот файл добавлен, что должно трактоваться как один блок с добавлением всего контента. Если же удалось построить контент файла предыдущей версии, значит нам требуется распределить список изменений на непересекающиеся между собой блоки, а после добавить в эти блоки недостающие сведения уже из старого контента.

\newpage
\subsubsection{Разбиение списка изменений на непересекающиеся блоки}

\begin{algorithm}[H]
\SetAlgoLined
\KwData{ list of changes \\ 
params = \{ $offsetSize$\} } 
\KwResult{ disjoint blocks of changes }

\SetKwFunction{FMain}{main}
\SetKwFunction{FIsNewBlock}{isNewBlock}

\SetKwProg{Fn}{Function}{:}{}

\Fn{\FMain{$changes$, $offsetSize$}}{

	\textbf{disjointBlocks} := [ ], \textbf{blockChanges} := [ ]

	\textbf{lastPosition} := changes[0].position

	\For{ (change : changes) }{

		\eIf{(isNewBlock(change, \textbf{lastPosition}, offsetSize))}
		{
			\textbf{blockChanges}.add(change)
		}{
			\textbf{newBlock} := new Block(\textbf{blockChanges})
		
			\textbf{blockChanges }:= []
		
			\textbf{disjointBlocks}.add(\textbf{newBlock})
		}
		\textbf{lastPosition} := change.position
	}
	\KwRet\ \textbf{disjointBlocks}
}

\Fn{\FIsNewBlock{$change$, $lastPosition$, $offsetSize$}}{

	\textbf{leftOperand} := $change$.position - $offsetSize$
	
	\textbf{rightOperand} := $lastPosition$ + $offsetSize$
	
	\If{($change.type$ == DELETION)}
	{
		\textbf{rightOperand} $++$
	}
	
	\eIf{(\textbf{leftOperand}$>$ \textbf{rightOperand})}
	{
		\KwRet\ true
	}{
		\KwRet\ false
	}
	
}
\caption{Разбиение на непересекающиеся блоки изменений.}
\label{DEFINE_DISJOINT_BLOCKS}
\end{algorithm}
\vspace{0.2cm}
\textit{где $offset\_size$ -- максимальное допустимое расстояние между элементами контента, которое позволяея определить,относятся ли два последовательных элемента к одному блоку изменений.}


\newpage
\subsubsection{Объединение блоков изменений с контентом}

\begin{algorithm}[H]
\SetAlgoLined
\KwData{ list of disjoint blocks of changes, content \\ 
params = \{ $offsetSize$\} } 
\KwResult{ disjoint blocks of changes with content}

\SetKwFunction{FMain}{main}
\SetKwFunction{FEnrichContent}{enrichContent}

\SetKwProg{Fn}{Function}{:}{}

\Fn{\FMain{$disjointBlocks$, $content$, $offsetSize$}}{

	\textbf{blocks} := [ ]

	\For{ (block : disjointBlocks) }{

		\textbf{contentChanges} = []
		
		\textbf{lastIndex} = block.changes[0].position
		
		enrichContent(\textbf{contentChanges}, content, \textbf{lastIndex} - offsetSize + 1, \textbf{lastIndex}))
		
		\For{ (change : block.changes) }{
		
			\textbf{contentChanges}.add(change)
			
			\If{(change.position $>$ \textbf{lastPosition} + 1)}
			{
				enrichContent(\textbf{contentChanges}, content, \textbf{lastIndex} + 1, change.position))
			}
			
			\textbf{lastPosition} := change.position
		
		}
		enrichContent(\textbf{contentChanges}, content, \textbf{lastIndex}, \textbf{lastIndex}+offsetSize))
	}
	\KwRet\ \textbf{blocks}
}

\Fn{\FEnrichContent{$contentChanges$, $content$, $start$, $end$}}{
	\For{$index \gets start$ to $end$}{
		\textbf{type} = UNMODIFIED
		
		\textbf{newChange} := new Change(type, $content$[index], index)
		
		$contentChanges$.add(\textbf{newChange})
	}
}
\caption{Объединение блоков изменений с контентом.}
\label{ENRICH_BLOCKS_WITH_CONTENT}
\end{algorithm}

\newpage
\subsection{Нахождение конфликтных ситуаций} 
\textbf{Дано:} \\
Измененный контент файла, номер версии контента,который был получен пользователем на момент редактирования. \\
\textbf{Ожидаемый результат:} \\
Измененный контент файла. \\
Если других изменений не было, то совпадает с теми данными, которые были получены от пользователя. Если же были найдены другие изменения этого контента, то либо разные изменения будут совмещены в одно, либо пользователю будет предоставлена возможность редактирования возникших конфликтов.

\begin{figure}[H]
\center{\includegraphics[width=0.9\textwidth]{update-file-content.png}}
\caption{Процесс изменения контента файлов.}
\label{update-file-content-process}
\end{figure}

Если других изменений контента не было найдено, то текущее изменение можно применять напрямую к данным. \\
Иначе, при наличии других, возможно конфликтующих, изменений, производится процесс поиска конфликтных ситуаций. \\
Если конфликтных ситуаций обнаружен не было, то достаточно просто объединить все изменения воедино и применить их к общей версии контента. \\
Если же при проверка были обнаружены конфликтные ситуации, то пользователю предоставляется возможность разрешить данные конфликты.

\newpage
\subsubsection{Поиск конфликтных ситуаций}

Требуется построить проекцию общих данных для разных изменений (включая текущее). После вычисляется общий список изменений, которые были сделаны как в текущем процессе редактирования, так и в стороннем изменении, с которым возможны конфликты. На основе этих изменений вычисляется новый список изменений, который необходимо применить, чтобы интегрировать в проект все модификации. \\
Эти изменения анализируются на наличие пересечений. Если пересечений нет, то изменения двух версий объединяются в одно и применяются к общему контенту. Иначе, пользователю предоставляется список конфликтных блоков контента и варианты их разрешения.

\begin{figure}[H]
\center{\includegraphics[width=0.9\textwidth]{check-conflicts.png}}
\caption{Процесс поиска конфликтных ситуаций.}
\label{check-conflicts-process}
\end{figure}

\subsubsection{Разрешение конфликтных ситуаций}

При наличии конфликтных ситуаций пользователь может принять или отклонить каждую часть как его изменений, так и сторонних.
После того, как все конфликты разрешены, пользователь может редактировать контент повторно, для разрешения смысловых пересечений. Затем, новый отредактированный контент сохраняется в системе.

\newpage
\subsubsection{Объединение нескольких изменений в одно}

Для получения нового списка изменений, которые должны примениться к актуальной версии контента с возможностью интегрирования в проект модификаций как текущего процесса редактирования, так и стороннего изменения, требуется объединить измнения в общий список. На основе общего списка изменений требуется вычислить контент, который будет содержать все изменения, которые происходили с контентом. \\
Имея актуальную версию данных и проекцию, построенную на основе общего списка изменений, можно вычислить новый список изменений, которые требуется применить к актуальной версии, чтобы все изменения были сохранены.

\begin{figure}[H]
\center{\includegraphics[width=0.9\textwidth]{unite-different-commits.png}}
\caption{Процесс объединения нескольких изменений в одно.}
\label{check-conflicts-process}
\end{figure}

\newpage
\subsection{Построение проекции данных по идентификатору версии}
Для построения проекции, требуется извлечь всю цепочку связаных \textit{Commit} вплоть до корневого элемента. Затем, последовательно применяя эти изменения к изначально заданной пустой проекции проекта, мы будем тем самым получать проекцию данных на каждый период времени, пока не дойдем до последнего, для которого результат проекции и будет искомым.

\begin{algorithm}[H]
\SetAlgoLined
\KwData{ commit identifier to make data projection} 
\KwResult{ data projection }

\SetKwFunction{FMain}{main}
\SetKwFunction{FExtractRelatedCommits}{extractRelatedCommits}

\SetKwProg{Fn}{Function}{:}{}

\Fn{\FMain{$commitId$}}{

	\textbf{projection} := Projection.empty()

	\textbf{commits} := extractRelatedCommits(commitId)
	
	\textbf{commits}.sort(by id)

	\For{ (commit : commits) }{

		\textbf{projection}.update(commit)
		
	}
	
	\KwRet\ \textbf{projection}
}

\Fn{\FExtractRelatedCommits{$commitId$}}{

	\textbf{allCommits} := commitRepo.findAll()

	\textbf{result} := []
	
	\textbf{lastParentId} := \textbf{allCommits}[$commidId$].parentId
	
	\textbf{result}.add(allCommits[$commitId$])
	
	\While {(\textbf{lastParentId} $\neq$ $null$)}{
		
		\textbf{result}.add(\textbf{allCommits}[\textbf{lastParentId}])

		\textbf{lastParentId} := \textbf{allCommits}[\textbf{lastParentId}].parentId
		
	}
	
	\KwRet\ \textbf{result}
}
\caption{Построение проекции данных по идентификатору версии.}
\label{MAKE_PROJECTION}
\end{algorithm}

\newpage
\section{Инфраструктура веб-платформы}

Запуск даже небольшой веб-системы может занять большое количество времени, необходимого для подготовки и настройки инфраструктуры.
А также возникает ряд вопросов, и все из них надо решить:
\begin{itemize}
\item Где взять инсталлятор и можно ли доверять этому источнику данных?
\item Кросс-платформенное ли приложение?
\item Есть ли зависимости, которые требуется установить для функционирования нашего приложения?
\item Как запускать приложение?
\item Как следить за потребляемыми ресурсами приложения и очистить их после завершения работы?
\item Каким образом можно обновить версию работающего приложения?
\end{itemize}
В данной главе будут рассмотрены применяемые в работе технологии технологии, которые помогают разрешить поставленные выше вопросы.

\subsection{Контейнеризация}
Контейнерезация - метод виртуализации, при котором ядро операционной системы поддерживает несколько изолированных экземпляров пространства пользователя вместо одного. Для пользователя эти экземпляры (контейнеры) полностью идентичны отдельным экземплярам операционной системы с установленным по требованию программным обеспечением. \\
Ядро позволяет обеспечить полную изолированность каждого из контейнеров, поэтому приложения, запущенные в разных контейнерах не могут воздействовать ни друг на друга, ни на хостовую операционную систему. Под хостом в данной случае подразумевается операционная система, которая позволяет запускать контейнеры. \\
При аппаратной виртуализации эмулируется аппаратное окружение и может быть запущено большое количество различных программных решений, в то время как контейнеры используют общее ядро хостовой машины. Также при контейнеризации отсутствуют дополнительные ресурсные расходы на эмуляцию достаточно ресурсоемкого виртуального оборудования для запуска программных систем, которая характерна для аппаратной виртуализации.

\subsubsection{Изоляция контейнеров}
В качестве средства изоляции контейнеров выступают процессы.
При исполнении программ управляющий блок процессора считывает инструкции для выполнения из памяти, например из регистра процесса. При смене процесса происходит переключение контекста, тем самым делаетмся снимок текущего состояния регистра процесса. Именно слепок регистра процессов и является элементом изоляции. \\
Пространство имён (namespace) - функция ядра Linux, которая позволяет изолировать и виртуализировать глобальные системные ресурсы множества процессов \cite{CONTAINER_ISOLATION}.  Рассмотрим основные виды пространств имен на примере ядра Linux:
\begin{table}[H]
\caption {Пространства имен.} \label{tab:}
\begin{center}
\begin{tabular}{| p{9cm}  | p{3.5cm}  | p{1.5cm} |}
\hline
\textbf{Namespace} & \textbf{Версия ядра} & \textbf{Год} \\
\hline
Файловая система (Mount) & 2.4.19 & 2002 \\
\hline
UTS & 2.6.19 & 2006 \\
\hline
ID процессов (PID) & 2.6.24 & 2008 \\
\hline
Сети (Network) & 2.6.29 & 2009 \\
\hline
Межпроцессорное взаимодействие (IPC) & 2.6.30 & 2009 \\
\hline
Пользовательские ID (User) & 3.8& 2013 \\
\hline
\end{tabular}
\end{center}
\end{table}

Для всех типов пространств имен верно: каждый процесс связан с пространством имён и может видеть или использовать только ресурсы, связанные с этим пространством имён, и, где это применимо, потомками пространств имён. \\
Описание пространств имен:
\begin{enumerate}
\item Файловая система (Mount) \\
Пространство имён файловой системы --  независимое дерево файловой системы, которое ассоциированно с определенной группой процессов.
\item UTS (Unix Time Sharing) \\
Изоляция двух элементов системы, которые относятся к системному вызову uname(). Позволяет каждому контейнеру иметь свои имена хоста и домена.
\item ID процессов (PID) \\
Изолирует пространство ID процессов. Процессы в различных пространствах могут иметь одинаковые ID. Однако в пространстве имён хоста должны иметь уникальные идентификаторы. \\
Процесс с PID равным 1 является инициализирующим процессом пространства.
\item Сети (Network) \\
Изоляция систем ресурсов, связанных с сетями.
Для обеспечения доступа во внешнюю сеть между физическим и виртуальным устройством из разных пространств создается мост.
\item Межпроцессное взаимодействие (IPC) \\
Включает в себя семафоры, разделяемую память и очереди сообщений с уникальными идентификаторами (ID) Позволяет взаимодействующим между собой процессам обращаться к общему ресурсу.
\item Пользовательские ID (User) \\
Изолируют ID пользователей и групп, корневой каталог и ключи. Пространства имён могут быть вложенными, максимальное количество уровней вложенности равно 32.
\end{enumerate}

Пространства имен дают процессам, запущенным в контейнерах, иллюзию, что они имеют свои собственные ресурсы. Основная цель --предотвращение вмешательства процессов одного контейнера в работу других контейнеров, а также работу хостовой машины. \\
На основе выше изложенных типов пространств имен построена классификация классификаци типов изоляции:
\begin{enumerate}
\item Изоляция файловой системы -- пространство предоставляет процессам каждого контейнера различное представление дерева файловой системы и ограничивает все события монтирования, происходящие внутри контейнера.
\item Изоляция UTS -- каждый контейнер может иметь свое собственное доменное имя и имя контейнера.
\item Изоляция процессов -- изоляция процессов путем переноса процессов, запущенных в контейнере, в собственное пространство имен и ограничения прав и видимости процессов, запущенных в других контейнерах и на самой хостовой машине.  Пространство имён PID иерархичное, следовательно процесс может видеть только процессы в своем собственном пространстве имен, либо в его «дочернем». 
\item Изоляция сетей --каждому контейнеру создается независимый сетевой стек при помощи пространства имён сети. Таким образом, каждый контейнер имеет свои собственные IP-адреса, таблицы IP-маршрутизации, сетевые устройства и т. д.
\item Изоляция IPC -- процесс в пространстве имен IPC не может писать или читать IPC ресурсы, принадлежащие другому пространству имен.
\item Изоляция пользователей -- пользователь остается привилегированным внутри контейнера и при этом непривилегированным внутри хостовой машины.
\end{enumerate}

\newpage
\subsubsection{Механизмы контейнеризации}

Существуют реализации контейнеризации, которые ориентированы на создание полноценных экземпляров операционных систем (Solaris Containers, контейнеры Virtuozzo), так и варианты, которые сфокусированы на изоляции отдельных сервисов с минимальным операционным окружением (Docker).

\begin{table}[H]
\caption {Механизмы контейнеризации.} \label{tab:containerization_mechanisms}
\begin{center}
\begin{tabular}{| p{5cm} | p{2cm}  | c | c| c | c | c |}
\hline
\textbf{Механизм} & \textbf{ОС} & \textbf{ФС} & \textbf{ВВ} & \textbf{П} & \textbf{ЦПУ} & \textbf{С} \\
\hline
chroot & UNIX & частично & - & - & - & - \\
\hline
Docker & UNIX Windows macOS & + & + & + & + & + \\
\hline
Solaris Containers & Solaris & + & - & + & + & + \\
\hline
Virtuozzo Containers & Linux Windows & + & + & + & + & + \\
\hline
\end{tabular}
\end{center}
\end{table}
\textit{где под ФС подразумевается изоляция файловой системы, ВВ - лимиты на ввод/вывод, П - лимиты на память, ЦПУ - квоты ЦПУ, Сеть - изоляция сети.} \\

В данной работе предпочтение было отдано Docker в связи с его легковесностью, большим функционалом и огромным сообществом пользователей\cite{DOCKER_DOCS}. \\

Docker-контейнеризация позволяет решить следующие вопросы:
\begin{itemize}
\item Поставка дистрибутива \\
Установка инсталятора, лицензия, пакет. \\
Docker-образ -- то, что поставляется (содержит в себе все необходимое для запуска приложения).
\item Эксплуатация \\
Запуск, установка, конфигурирование, обновление, кросс-платформенность, остановка, очистка ресурсов, безопасность, конфликты ресурсов. \\
Достигается за счет запуска программного обеспечения в изолированном окружении. \\
Docker-контейнер -- то, что в итоге эксплуатируется (для упрощения настройки, запуска, использования приложения и очистки его ресурсов)
\end{itemize}

\subsection{Непрерывная интеграция системы}

Непрерывная интеграция (Continuous Integration) -- практика разработки программного обеспечения. Она заключается в постоянном слиянии рабочих версий продукта в общую основную ветвь разработки и выполнении автоматизированной сборки проекта для того, чтобы как можно скорее можно было выявить потенциальные дефекты и решения интеграционных проблем системы. \\
Для применения практики необходимо выполнение следующих требования: 
\begin{itemize}
\item Программное обеспечение должно храниться в репозитории системы контроля версий.
\item Должны быть автоматизированы операции копирования программного обеспечения из репозитория, его сборки и тестирования
\end{itemize}
Преимущества применения данной практики:
\begin{enumerate}
\item Быстрее выявляются и исправляются проблемы интеграции.
\item Постоянный процесс тестирования новых версий продукта.
\item Наличие актуальной стабильной версии продукта. 
\end{enumerate}
Также непрерывная интеграция имеет следующие недостатки:
\begin{enumerate}
\item Затраты на поддержку работы системы непрерывной интеграции.
\item Дополнительные вычислительные ресурсы.
\end{enumerate}

В данной работе использование системы непрерывной интеграции позволит автоматизировать процессы сборки, тестирования и создания нового docker-образа для обновления стенда веб-платформы. \\
Существует большое количество инструментов для непрерывной интеграции системы, в основном они подразделяются на две категории:
\begin{itemize}
\item Локальные (GitLab CI, TeamCity, Jenkins)
\item Облачные (BitBucket Pipelines, Heroku CI, Travis)
\end{itemize}

С целью минимизации потребляемых ресурсов в данной работе была выбрана облачная CI система Travis.

Пайплайн сборки системы:
\begin{enumerate}
\item Сборка и тестирование программного обеспечения.
\item Создание и публикация нового docker-образа.
\item Деплой новой версии программного обеспечения в платформу.
\end{enumerate}

\subsection{Базы данных}

В этом разделе описано сравнение основных типов хранения данных. Для эффективности работы с данными системы требуется выбрать наиболее подходящее решение. В данной работе наиболее важной характеристикой, которой должна обладать база данных, является целостность хранимых данных.

\subsubsection{Сравнительный анализ SQL и NoSQL решений}

Далее предсатвлены сравнительные характеристики различных подходов к хранению данных\cite{DATABASE_COMPARISON}:
\begin{enumerate}
	\item Язык запросов: \\ РСУБД используют единый SQL-стандарт. Каждая NoSQL база данных реализует свой способ работы с данными.
	\item Структура данных: \\ РСУБД обычно используется для однозначно определенных структур данных, которые не будут часто подвергаться изменениям. NoSQL же выделяется здесь своей возможностью хранения больших объёмов неструктурированной информации. Она не накладывает ограничений на типы хранимых данных. Более того, при необходимости в процессе работы можно добавлять новые типы данных.
	\item Масштабируемость: \\ Оба решения можно масштабировать вертикально (путём увеличения системных ресурсов). Однако, решения NoSQL обычно предоставляют простые способы горизонтального масштабирования (как пример, создание кластера из нескольких нод).
	\item Принципы ACID: \\ Большинство NoSQL решений не имеют даже частичной поддержки ACID. РСУБД же в свою очередь соответствуют требованиям ACID (Atomicity, Consistency, Isolation, Durability — атомарность, непротиворечивость, изолированность, долговечность), что позволяет обеспечить целостность хранимых данных. 
\end{enumerate}

\begin{table}[H]
\begin{center}
\begin{tabular}{ |p{4.2cm}|p{6cm}|p{5cm}|  }
	\hline
 	\textbf{Характеристика} & \textbf{SQL} & \textbf{NoSQL}\\
 	\hline
 	Язык запросов    & Единый структурированный язык & Меняется в зависимости от подхода к хранению данных \\
 	\hline
 	Структура данных & \multirow{3}{6cm}{Однозначно определенная структура данных со связями} & Документы \\ \cline{3-3}
	& & Пары <key, value> \\ \cline{3-3}
	& & Графы \\\cline{3-3}
	\hline
	Масштабируемость & Вертикальная &  Вертикальная + Горизонтальная \\
	\hline
	Принципы ACID & Соответствуют & Частичное соответствие \\
 	\hline
\end{tabular}
\end{center}
\caption {Анализ SQL и NoSQL решений}
\label{tab:databases}
\end{table}

\newpage
В данной работе было отдано предпочтение реляционным базам данным, так как основополагающим фактором выбора является поддержание целостности данных. В качестве решения выбран PostgreSQL, как бесплатное программное обеспечение с наиболее продвинутым функционалом и огромным сообществом, развивающим эту систему хранения данных. \\

Также в данной работе имеется возможность миграции данных, что позволяет при необходимости обновить структуру базы, и в случае ошибки вернуть все в прежнее состояние.

\newpage
\section{Характеристики качества}

\textbf{ISO-9126} -- международный стандарт, который определяет оценочные характеристики качества программного обеспечения\cite{ISO_9126}. \\
Стандарт включает в себя 4 раздела, которые описывают следующее:
\begin{enumerate}
\item модель качества
\item внешние метрики качества
\item внутренние метрики качества
\item метрики качества в использовании
\end{enumerate} 
Отличительной чертой хорошего программного обеспечения является полное или частичное соответствие этому стандарту.
В данной работе рассматривается только первый раздел, описывающий модель качества ПО. Модель качества классифицирует качество ПО на 6 характеристии. В свою очередь каждая характеристика также обладает некоторым набором подхарактеристик, более детализирующих ее.
\begin{enumerate}
\item Функциональность \\
Набор атрибутов, которые характеризуют соответствие функциональных возможностей ПО списку функциональности, которая требуется пользователю. \\
Подхарактеристики:
\begin{itemize}
\item Применимость -- относится к уместности (спецификации) функций программного обеспечения.
\item Точность -- корректность выполняемых пользователем действий в системе.
\item Совместимость -- способность программного обеспечения взаимодействовать другими компонентыми или системами.
\item Соответствие -- соблюдение основных отраслевых  или правительственных законов и принципов.
\item Безопасность -- предотвращение несанкционированного доступа к функциям программного обеспечения.
\end{itemize}
Данная система реализована с соблюдением указанных ранее бизнес-требований. Никаких отраслевых ограничений на веб-платформу не накладывается. Также реализована система защиты от неразрешенного доступа к веб-платформе, которая описана в одном из следующих параграфов.
\\
Следовательно, система полностью соответствует данной характеристике программного обеспечения.
\item Надежность \\
Способность программного обеспечения поддерживать уровень качества функицонирования при определенных условиях в течение определенног опериода времени.
\begin{itemize}
\item Уровень завершенности -- касается частоты программных сбоев.
\item Отказоустойчивость -- способность программного обеспечения выдержать внутренние и внешние отказы и ошибки.
\item Восстанавливаемость -- способность вернуть вышедшую из строя систему к полноценному функционированию с восстановлением всех данных и сетевых соединений.
\end{itemize}
В данной системе полностью реализован указанный ранее функционал с последующим его тестированием. Большая часть исключительных ситуаций, приводящих к ошибкам и сбоям системы, обрабатывается и отдается пользователю в удобочитаемом виде, тем самым не приводит к выходу системы из строя. Данные системы хранятся в выделенном хранилище данных, тем самым имеется возможность восстановления полностью функционирующей системы. Имеется возможность горизонтального масштабирования системы, что позволяет выдержать большие нагрузки пользователей и улучшит отказоустойчивость системы. \\
Можно сделать вывод, что данная система полностью удовлетворяет требованиям рассматриваемой характеристики.
\item Удобство использования \\
Рассматривается только в отношении существующего функционала программного обеспечения и относится к простоте использования определенных функций.
\begin{itemize}
\item Понятность -- определяет легкость понимания функционала системы пользователем.
\item Обучаемость -- описывает прилагаемые усилия по обучению различных типов пользователей: новичков, экспертов в области и т.д.
\item Простота использования -- способность программного обеспечения легко управляться конкретным пользователем в данном окружении.
\end{itemize}
Веб-сервис реализован с соблюдением архитектуры REST. Система имеет простой веб-интерфейс, который реализован с учетом важности структурирования данных, минимизации действий не в угоду пониманию. Интерфейс выглядит достаточно аккуратным и не перегружает пользовательское внимание. Веб-интерфейс был протестирован несколькими пользователями, особых нареканий выявлено не было. \\
Можно считать, что в некоторой мере данная характеристика соблюдается.
\item Эффективность \\
Описывает соотношение между объемом используемых системных ресурсов и качеством функционирования программного обеспечения при определенных условиях.
\begin{itemize}
\item Временная эффективность -- характеризует время отклика системы.
\item Эффективность ресурсов -- характеризует объемы используемых ресурсов: оперативная память, процессор, дисковое пространство и использование сети.
\end{itemize}
Среднее время отклика системы для проекта несущих стен здания на оборудовании t2.micro облачного провайдера AWS EC2 в 95\% случаев составляло не более 300 мс. Благодаря хорошей временной эффективности пользователь всегда будет иметь представление о том, работает ли сейчас функционал системы. \\
Для функционирования одного экземпляра сервиса будет достаточно 512 Мб RAM, 1-core процессора с тактовой частотой выше 1.5 ГГц, дисковое пространтсво в зависимости от количества проектов и их размера, производительность сети от 10 Мбит/c.
\item Поддерживаемость \\
Описывает объем работ, которые требуются для модифицирования программного обеспечения.
\begin{itemize}
\item Возможность анализа -- характеризует возможность идентифицировать основную проблему, которая привела к программному сбою.
\item Изменяемость -- характеризует количество усилий и времени на изменение программного обеспечения.
\item Стабильность -- характеризует чувствительность к изменению системы.
\item Тестируемость -- характеризует усилия, необходимые для проверки корректности работы системы после внесения изменений в нее.
\end{itemize}
Данная веб-система реализована на основе принципов SOLID и DDD (предметно-ориентированное проектирование), соответственно для изменения программного обеспечения не требуется тратить большое количество усилий. Также в системе ведется логирование всех ошибок, что позволяет достаточно быстро понять основные проблемы, которые могли привести к сбою системы. К внешнему API системы присутствует документация. Имеется тестовое покрытие основного функционала системы. Более подробно тестовое покрытие описано ниже.
\item Портируемость \\
Описывает, насколько хорошо программное обеспечение может адаптироваться к изменениям окружения или его требованиям.
\begin{itemize}
\item Адаптируемость -- характеризует способность системы к изменению окружения или его требований.
\item Возможность установки -- характеризует усилия, которые требуются для установки программного обеспечения.
\item Заменяемость -- характеризует насколько легко заменить данный программный компонент на другой в данной среде.
\end{itemize}
Данная система запускается в выделенном окружении с помощью docker-контейнеризации. Что при наличии окружения для запуска docker-образов системы нивелирует вопросы сложности адаптируемости, установки и заменяемости.
\end{enumerate}

\subsubsection{Тестовое покрытие системы}

Анализ тестового покрытия системы выполнен с помощью бесплатной библиотеки \textit{JaCoCo} \cite{TEST_COVERAGE_LIB}. \textit{JaCoCo} предоставляет возможность анализа тестового покрытия кода в средах на основе виртуальной машины Java.
Основные возможности инструмента \textit{JaCoCo}:
\begin{itemize}
\item Анализ покрытия инструкций, логических разветвлений, строк кода, методов и классов, а также возможность нахождения циклических зависимостей.
\item Основан на байт-коде Java и поэтому работает также без исходных файлов.
\item Несколько форматов отчетов (HTML, XML, CSV).
\item Наличие различных вариантов подключения анализатора тестового покрытия: Gradle, Maven, TeamCity, Jenkins, SonarQube и другие  плагины.
\item Совместим со всеми выпущенными версиями Java.
\end{itemize}

\begin{figure}[H]
\center{\includegraphics[width=1.0\textwidth]{test-coverage.png}}
\caption{Тестовое покрытие системы.}
\label{test-coverage}
\end{figure}

Сгенерированный отчет показал качество покрытия инструкций кода, равное 67\%, а качество покрытия логических ветвлений, равное 55\%.

\subsubsection{Безопасность}

Для предотвращения неразрешенного доступа к функционалу данной системы реализована система безопасности. В начале пользования системой каждому пользователю требуется пройти процесс авторизации. Во время авторизации для пользователя создается новая сессия, идентификатор которой передается в запросах между веб-интерфейсом и backend-сервером в cookie для валидации доступа. Каждая сессия имеет максимальное время жизни, равное 10 минутам. В случае неактивности пользователя в системе на протяжении промежутка времени, который превышает указанное ранее максимальное время жизни сессии, доступ к системе запрещается и пользователю требуется повторно произвести процесс авторизации. \\
Для возможности горизонтального масштабирования системы информация о текущей сессии сохраняется в базу данных. Что позволяет разным запущенным инстансам системы получить актуальные данные о валидности пользовательской сессии работы в системе. \\
Также для возможности использования внешнего API системы пользователь может получить JSON Web Token, который можно использовать для аутентификации в системе. \\
JSON Web Token -- открытый стандарт (RFC 7519) для создания токенов доступа, который основан на формате JSON. Токены создаются на стороне сервера, подписываются секретным ключом и передаются клиенту. Данный токен в дальнейшем может быть использован для подтверждения своей личности.

\newpage
\chapter{Заключение}

В данной работе получены следующие результы:
\begin{enumerate}
\item Реализована  веб-система, которая предоставляет следующие возможности:
\begin{itemize}
\item управление жизненным циклом архитектурных проектов
\item отслеживание изменений проекта во времени
\item одновременное внесение изменений в проект несколькими пользователями с возможностями разрешения возникших конфликтных ситуаций
\end{itemize}
\item Веб-система предоставляет внешнее API и документацию к нему.
\item Реализован веб-интерфейс для взаимодействия с системой.
\item Написаны скрипты сборки и тестирования системы.
\item Написаны скрипты настройки окружения для запуска docker-контейнеров.
\item Написаны скрипты сборки docker-образа системы и его запуска.
\end{enumerate}

Возможные направления развития данной работы:
\begin{itemize}
\item Возможность построения 3D модели проекта.
\item Возможность создания связанных между собой файлов с BIM представлениями объектов.
\end{itemize}

\begin{thebibliography}{1}
{\small
\bibitem{BUILDING_GROWTH_RATE} {\it GlobalData.}
\textbf{Global construction output growth to reach 3.4\% in 2019} // Публикация на www.globaldata.com. 11 April 2019.
\bibitem{BUILDING_SOFTWARE} \textit{Ar. Mustakeem Raza Khan, Prof. S.K Gupta, Ar. Rakesh Kumar.}
\textbf{Role of Computer’s Technology: Architectural Design} // International Journal for Research in Applied Science \& Engineering Technology (IJRASET)
\bibitem{BIM_FUTURE} {\it Karen M. Kensek, Douglas E. Noble.}
\textbf{Building Information Modeling: BIM in Current and Future Practice (1st ed.)} // 2014 Hoboken, New Jersey: John Wiley
\bibitem{BIM_ADVANTAGES} {\it Arayici, Y, Coates, P, Koskela, LJ, Kagioglou, M, Usher, C.}
\textbf{Technology adoption in the BIM implementation for lean architectural practice)} // Technology adoption in the BIM implementation for lean architectural practice, Automation in Construction, 2011. pp. 189-195.
\bibitem{BIM_USAGE} {\it McAuley, B., Hore, A. and West R.}
\textbf{BICP Global BIM Study - Lessons for Ireland’s BIM Programme} // Construction IT Alliance (CitA), 2017
\bibitem{BIM_UK} {\it UK Government.}
\textbf{Level 3 Building Information Modelling - Strategic Plan} // Digital Built Britain, February 2015
\bibitem{BIM_RUSSIA} {\it Президент Российской Федерации Путин В.В.}
\textbf{Поручение ПР-1235} // 19.07.2018.
\bibitem{IFC_MODELS} {\it buildingSMART International Ltd}
\textbf{Industry Foundation Classes Release 4} // section "Rooted entities" \hspace{0.5cm} http://www.buildingsmart-tech.org/ifc/IFC4/final/html/
\bibitem{MYERS_ALGO} {\it EUGENE W. MYERS}
\textbf{An O(ND) Difference Algorithm and Its Variations} // Department of Computer Science, University of Arizona, Tucson
\bibitem{CONTAINER_ISOLATION} {\it Wikipedia}
\textbf{Пространство имён (Linux)} // https://ru.wikipedia.org/wiki
\bibitem{DOCKER_DOCS} {\it Docker, Inc.}
\textbf{Docker Documentation} //  https://docs.docker.com
\bibitem{DATABASE_COMPARISON} {\it Kosovare Sahatqija ; Jaumin Ajdari ; Xhemal Zenuni ; Bujar Raufi ; Florije Ismaili}
\textbf{Comparison between relational and NOSQL databases} // 2018 41st International Convention on Information and Communication Technology, Electronics and Microelectronics (MIPRO)
\bibitem{ISO_9126} {\it ISO/IEC}
\textbf{Information technology -- Software product quality -- Part 1: Quality model} // INTERNATIONAL STANDARD 20.03.2000
\bibitem{TEST_COVERAGE_LIB} {\it EclEmma team}
\textbf{JaCoCo documentation} // Official provider's documentation https://www.jacoco.org/jacoco/trunk/doc/
}
\end{thebibliography}

\appendix
\chapter{Документация API}
\includepdf[pages=-]{api.pdf}

\end{document}
